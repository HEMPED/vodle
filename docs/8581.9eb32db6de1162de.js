"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8581],{8581:(it,m,c)=>{c.r(m),c.d(m,{AssistPage:()=>Z,AssistPageModule:()=>et});var d=c(4666),g=c(2508),p=c(8139),_=c(1005),x=c(6476),h=c(1670),J=c(2340),t=c(2135),b=c(6301);function P(o,s){1&o&&t._UZ(0,"ion-spinner",12)}function T(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-button",13),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.back())}),t._UZ(2,"ion-icon",14),t.qZA(),t._uU(3," \xa0 "),t.BQk()}}function w(o,s){if(1&o){const n=t.EpF();t.ynx(0),t._uU(1," \xa0 "),t.TgZ(2,"ion-button",15),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.forward())}),t._UZ(3,"ion-icon",16),t.qZA(),t.BQk()}}function Q(o,s){1&o&&(t.TgZ(0,"ion-item",26)(1,"p"),t._UZ(2,"span",10),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,1,"assist.favourite-warn-change"),t.oJD))}function H(o,s){if(1&o&&(t.TgZ(0,"ion-item"),t._UZ(1,"ion-radio",27),t.TgZ(2,"ion-label"),t._UZ(3,"i",10),t.qZA()()),2&o){const n=s.index,e=t.oxw(3);t.xp6(1),t.Q6J("value",e.P.oidsorted[n]),t.xp6(2),t.Q6J("innerHtml",e.P.p.options[e.P.oidsorted[n]].name,t.oJD)}}const l=function(){return[]};function M(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item")(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Q,4,3,"ion-item",20),t.TgZ(6,"ion-item",21)(7,"p"),t._UZ(8,"span",10),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-radio-group",22),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.favourite=i)})("ngModelChange",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.favourite_change())}),t.YNc(11,H,4,2,"ion-item",23),t.qZA(),t.TgZ(12,"ion-item",24)(13,"ion-button",25),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.submit_favourite())}),t._UZ(14,"ion-label",10),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"ion-item",24),t._UZ(17,"small",10),t.ALo(18,"translate"),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,8,"assist.favourite-intro-1"),t.oJD),t.xp6(2),t.Q6J("ngIf",n.P.p.have_acted),t.xp6(3),t.Q6J("innerHtml",t.lcZ(9,10,"assist.favourite-intro-2"),t.oJD),t.xp6(2),t.Q6J("ngModel",n.favourite),t.xp6(1),t.Q6J("ngForOf",t.DdM(16,l).constructor(n.P.oidsorted.length)),t.xp6(2),t.Q6J("disabled",!n.favourite),t.xp6(1),t.Q6J("innerHtml",t.lcZ(15,12,"OK"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(18,14,"assist.add-option-info"),t.oJD)}}const u=function(o){return{favourite:o}};function v(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",28)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"ion-item")(6,"p"),t._UZ(7,"span",10),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-item")(10,"p"),t._UZ(11,"span",10),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"ion-item",24)(14,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.understood_favourite())}),t._UZ(15,"ion-label",10),t.ALo(16,"translate"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Q6J("innerHtml",t.xi3(4,4,"assist.favourite-explanation-1",t.VKq(15,u,n.P.p.options[n.favourite].name)),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.xi3(8,7,"assist.favourite-explanation-2",t.VKq(17,u,n.P.p.options[n.favourite].name)),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.xi3(12,10,"assist.favourite-explanation-3",t.VKq(19,u,n.P.p.options[n.favourite].name)),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(16,13,"next"),t.oJD)}}function U(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"ion-checkbox",30),t.TgZ(2,"ion-text",31),t._UZ(3,"i",10),t._uU(4,"\xa0"),t.TgZ(5,"ion-text",32),t._uU(6,"("),t._UZ(7,"span",10),t.ALo(8,"translate"),t._uU(9,")"),t.qZA()(),t.BQk()),2&o){const n=t.oxw().index,e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.P.p.options[e.P.oidsorted[n]].name,t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,2,"favourite"),t.oJD)}}function D(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-checkbox",33),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw().index,r=t.oxw(3);return t.KtG(r.acceptable[r.P.oidsorted[a]]=i)})("ngModelChange",function(){t.CHM(n);const i=t.oxw(4);return t.KtG(i.acceptable_change())}),t.qZA(),t.TgZ(2,"ion-label"),t._UZ(3,"i",10),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().index,e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.acceptable[e.P.oidsorted[n]]),t.xp6(2),t.Q6J("innerHtml",e.P.p.options[e.P.oidsorted[n]].name,t.oJD)}}function L(o,s){if(1&o&&(t.TgZ(0,"ion-item"),t.YNc(1,U,10,4,"ng-container",9),t.YNc(2,D,4,2,"ng-container",9),t.qZA()),2&o){const n=s.index,e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.P.oidsorted[n]==e.favourite),t.xp6(1),t.Q6J("ngIf",e.P.oidsorted[n]!=e.favourite)}}function k(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",21)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,L,3,2,"ion-item",23),t.TgZ(6,"ion-item",24)(7,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.submit_acceptable())}),t._UZ(8,"ion-label",10),t.ALo(9,"translate"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,3,"assist.acceptable-intro"),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.DdM(7,l).constructor(n.P.oidsorted.length)),t.xp6(3),t.Q6J("innerHtml",t.lcZ(9,5,"OK"),t.oJD)}}function y(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",28)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"ion-item")(6,"p"),t._UZ(7,"span",10),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-item",28)(10,"p"),t._UZ(11,"span",10),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"ion-item")(14,"p"),t._UZ(15,"span",10),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"ion-item")(18,"p"),t._UZ(19,"span",10),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"ion-item",24)(22,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.understood_acceptable())}),t._UZ(23,"ion-label",10),t.ALo(24,"translate"),t.qZA()(),t.BQk()}2&o&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,6,"assist.acceptable-explanation-1"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,8,"assist.acceptable-explanation-2"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(12,10,"assist.acceptable-explanation-3"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(16,12,"assist.acceptable-explanation-4"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(20,14,"assist.acceptable-explanation-5"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(24,16,"next"),t.oJD))}function C(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-label"),t._UZ(2,"i",10),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"ion-buttons",4)(5,"ion-input",34),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).index,r=t.oxw(3);return t.KtG(r.estimates[r.P.oidsorted[a]]=i)})("ngModelChange",function(){t.CHM(n);const i=t.oxw(5);return t.KtG(i.estimate_change())}),t.qZA(),t._uU(6,"\xa0% "),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).index,e=t.oxw(3);t.xp6(2),t.Q6J("innerHtml",e.P.p.options[e.P.oidsorted[n]].name,t.oJD),t.xp6(3),t.Q6J("ngModel",e.estimates[e.P.oidsorted[n]])}}function q(o,s){if(1&o&&(t.TgZ(0,"ion-item"),t.YNc(1,C,7,2,"ng-container",9),t.qZA()),2&o){const n=t.oxw().index,e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.P.oidsorted[n]!=e.favourite)}}function N(o,s){if(1&o&&(t.ynx(0),t.YNc(1,q,2,1,"ion-item",9),t.BQk()),2&o){const n=s.index,e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.acceptable[e.P.oidsorted[n]]&&e.P.oidsorted[n]!=e.favourite)}}function G(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",21)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,N,2,1,"ng-container",23),t.TgZ(6,"ion-item",24)(7,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.submit_estimates())}),t._UZ(8,"ion-label",10),t.ALo(9,"translate"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,3,"assist.estimates-intro"),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.DdM(7,l).constructor(n.P.oidsorted.length)),t.xp6(3),t.Q6J("innerHtml",t.lcZ(9,5,"OK"),t.oJD)}}function K(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",21)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"ion-item")(6,"p"),t._UZ(7,"span",10),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-item",24)(10,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.understood_estimates())}),t._UZ(11,"ion-label",10),t.ALo(12,"translate"),t.qZA()(),t.BQk()}2&o&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,3,"assist.estimates-explanation-1"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,5,"assist.estimates-explanation-2"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(12,7,"next"),t.oJD))}function I(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-item",38),t.NdJ("click",function(){const a=t.CHM(n).index,r=t.oxw(3);return t.KtG(r.go_index(a))}),t.TgZ(1,"ion-label")(2,"b"),t._UZ(3,"i",10),t.qZA()()()}if(2&o){const n=s.index,e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.P.p.options[e.thresholded_oids[n]].name,t.oJD)}}function E(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-item")(1,"p"),t._UZ(2,"span",10),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-buttons",4)(5,"ion-input",39),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(3);return t.KtG(a.thresholds[a.thresholded_oids[a.current_index]]=i)})("ngModelChange",function(){t.CHM(n);const i=t.oxw(3);return t.KtG(i.threshold_change())}),t.qZA(),t._uU(6,"\xa0% "),t.qZA()()}if(2&o){const n=t.oxw(3);t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,3,"assist.thresholds-question-2"),t.oJD),t.xp6(3),t.Q6J("min",n.estimates[n.thresholded_oids[n.current_index]])("ngModel",n.thresholds[n.thresholded_oids[n.current_index]])}}function F(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-item",38),t.NdJ("click",function(){const a=t.CHM(n).index,r=t.oxw(3);return t.KtG(r.go_index(r.current_index+1+a))}),t.TgZ(1,"ion-label")(2,"b"),t._UZ(3,"i",10),t.qZA()()()}if(2&o){const n=s.index,e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.P.p.options[e.thresholded_oids[e.current_index+1+n]].name,t.oJD)}}const f=function(o,s){return{estimate:o,option:s}};function Y(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.YNc(1,I,4,1,"ion-item",35),t.TgZ(2,"ion-item",36)(3,"ion-label")(4,"b"),t._UZ(5,"i",10),t.qZA()()(),t.TgZ(6,"ion-item",21)(7,"p"),t._UZ(8,"span",10),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-item")(11,"p"),t._UZ(12,"span",10),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-buttons",4)(15,"ion-button",37),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.threshold_yes())}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-button",37),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.threshold_no())}),t.ALo(18,"translate"),t.qZA()()(),t.YNc(19,E,7,5,"ion-item",9),t.TgZ(20,"ion-item",24)(21,"ion-button",25),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.submit_threshold())}),t._UZ(22,"ion-label",10),t.ALo(23,"translate"),t.qZA()(),t.YNc(24,F,4,1,"ion-item",35),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.DdM(24,l).constructor(n.current_index)),t.xp6(4),t.Q6J("innerHtml",n.P.p.options[n.thresholded_oids[n.current_index]].name,t.oJD),t.xp6(3),t.Q6J("innerHtml",t.xi3(9,12,"assist.thresholds-intro",t.WLB(25,f,n.estimates[n.thresholded_oids[n.current_index]],n.P.p.options[n.thresholded_oids[n.current_index]].name)),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.xi3(13,15,"assist.thresholds-question-1",t.WLB(28,f,n.estimates[n.thresholded_oids[n.current_index]],n.P.p.options[n.thresholded_oids[n.current_index]].name)),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(16,18,"yes"),t.oJD)("color",1==n.threshold_answer[n.thresholded_oids[n.current_index]]?"success":"light"),t.xp6(2),t.Q6J("innerHtml",t.lcZ(18,20,"no"),t.oJD)("color",0==n.threshold_answer[n.thresholded_oids[n.current_index]]?"warning":"light"),t.xp6(2),t.Q6J("ngIf",0==n.threshold_answer[n.thresholded_oids[n.current_index]]),t.xp6(2),t.Q6J("disabled",1!=n.threshold_answer[n.thresholded_oids[n.current_index]]&&0!=n.threshold_answer[n.thresholded_oids[n.current_index]]),t.xp6(1),t.Q6J("innerHtml",t.lcZ(23,22,"OK"),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.DdM(31,l).constructor(n.thresholded_oids.length-1-n.current_index))}}const B=function(o,s){return{threshold:o,wap:s}};function O(o,s){if(1&o&&(t.TgZ(0,"ion-text")(1,"p")(2,"b"),t._UZ(3,"i",10),t.qZA()(),t._UZ(4,"p",10),t.ALo(5,"translate"),t.qZA()),2&o){const n=t.oxw().index,e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.P.p.options[e.favourite].name,t.oJD),t.xp6(1),t.Q6J("innerHtml",t.xi3(5,2,"assist.ratings-favourite",t.WLB(5,B,e.thresholds[e.acceptable_oids[n]],e.ratings[e.acceptable_oids[n]])),t.oJD)}}const z=function(o,s,n){return{threshold:o,wap:s,more_than:n}};function S(o,s){if(1&o&&(t.TgZ(0,"ion-text")(1,"p")(2,"b"),t._UZ(3,"i",10),t.qZA()(),t._UZ(4,"p",10),t.ALo(5,"translate"),t.qZA()),2&o){const n=t.oxw().index,e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.P.p.options[e.acceptable_oids[n]].name,t.oJD),t.xp6(1),t.Q6J("innerHtml",t.xi3(5,2,"assist.ratings-acceptable",t.kEZ(5,z,e.thresholds[e.acceptable_oids[n]],e.ratings[e.acceptable_oids[n]],100-e.ratings[e.acceptable_oids[n]])),t.oJD)}}function W(o,s){if(1&o&&(t.TgZ(0,"ion-item"),t.YNc(1,O,6,8,"ion-text",9),t.YNc(2,S,6,9,"ion-text",9),t.qZA()),2&o){const n=s.index,e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.acceptable_oids[n]==e.favourite),t.xp6(1),t.Q6J("ngIf",e.acceptable_oids[n]!=e.favourite)}}function V(o,s){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",28)(2,"p"),t._UZ(3,"span",10),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"ion-item",21)(6,"p"),t._UZ(7,"span",10),t.ALo(8,"translate"),t.qZA()(),t.YNc(9,W,3,2,"ion-item",23),t.TgZ(10,"ion-item"),t._UZ(11,"p",10),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-item",21),t._UZ(14,"p",10),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"ion-item",40)(17,"ion-button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.understood_ratings())}),t._UZ(18,"ion-label",10),t.ALo(19,"translate"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,6,"assist.ratings-intro-1"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,8,"assist.ratings-intro-2"),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.DdM(16,l).constructor(n.acceptable_oids.length)),t.xp6(2),t.Q6J("innerHtml",t.lcZ(12,10,"assist.ratings-other"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(15,12,"assist.ratings-extro"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(19,14,"OK"),t.oJD)}}function j(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-fab",41)(1,"ion-fab-button",42),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.scroll_to_top())}),t._UZ(2,"ion-icon",43),t.qZA()()}}function R(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-fab",44)(1,"ion-fab-button",42),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.scroll_to_bottom())}),t._UZ(2,"ion-icon",45),t.qZA()()}}function X(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-content",17),t.NdJ("ionScroll",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onScroll())}),t.YNc(1,M,19,17,"ng-container",9),t.YNc(2,v,17,21,"ng-container",9),t.YNc(3,k,10,8,"ng-container",9),t.YNc(4,y,25,18,"ng-container",9),t.YNc(5,G,10,8,"ng-container",9),t.YNc(6,K,13,9,"ng-container",9),t.YNc(7,Y,25,32,"ng-container",9),t.YNc(8,V,20,17,"ng-container",9),t.YNc(9,j,3,0,"ion-fab",18),t.YNc(10,R,3,0,"ion-fab",19),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("scrollEvents",!0),t.xp6(1),t.Q6J("ngIf",1==n.step),t.xp6(1),t.Q6J("ngIf",1.1==n.step),t.xp6(1),t.Q6J("ngIf",2==n.step),t.xp6(1),t.Q6J("ngIf",2.1==n.step),t.xp6(1),t.Q6J("ngIf",3==n.step),t.xp6(1),t.Q6J("ngIf",3.1==n.step),t.xp6(1),t.Q6J("ngIf",4==n.step),t.xp6(1),t.Q6J("ngIf",5==n.step),t.xp6(1),t.Q6J("ngIf",n.show_up),t.xp6(1),t.Q6J("ngIf",n.show_down)}}const $=function(o,s){return{i:o,n:s}};let Z=(()=>{class o{constructor(n,e,i){this.translate=n,this.modalController=e,this.G=i,this.Array=Array,this.Math=Math,this.Object=Object,this.window=window,this.document=document,this.environment=J.N,this.JSON=JSON,this.page="assist",this.step=1,this.steps_reached=1,this.n_steps=5,this.changes=!1,this.current_index=0,this.favourite="",this.acceptable={},this.acceptable_oids=[],this.estimates={},this.thresholded_oids=[],this.threshold_answer={},this.thresholds={},this.ratings={},this.show_up=!1,this.show_down=!1,this.G.L.entry("AssistPage.constructor")}ngOnInit(){this.G.L.entry("AssistPage.ngOnInit")}ionViewWillEnter(){if(this.G.L.entry("AssistPage.ionViewWillEnter"),this.G.D.page=this,this.G.S.default_wap>0)for(const n of this.P.oidsorted)this.acceptable[n]=!0,this.estimates[n]=this.G.S.default_wap>5?105-this.G.S.default_wap:100;else for(const n of this.P.oidsorted)this.estimates[n]=50}ionViewDidEnter(){this.G.L.entry("AssistPage.ionViewDidEnter"),this.onScroll()}onDataReady(){this.G.L.entry("AssistPage.onDataReady")}onDataChange(){this.G.L.entry("AssistPage.onDataChange")}ionViewWillLeave(){this.G.L.entry("AssistPage.ionViewWillLeave")}ionViewDidLeave(){this.G.L.entry("AssistPage.ionViewDidLeave"),this.G.D.save_state()}set_rating(n,e){this.ratings[n]=e,this.P.p.set_my_own_rating(n,e,!0)}close(){this.modalController.dismiss(),this.P.update_order()}back(){this.step>1&&(this.step=Math.ceil(this.step)-1,this.changes=!1)}forward(){this.step<this.steps_reached&&(this.step=Math.floor(this.step)+1)}go_step(n){if(4==n){this.thresholded_oids=[];for(const e of this.acceptable_oids)e!=this.favourite&&this.thresholded_oids.push(e);this.go_index(0)}this.steps_reached=Math.max(this.steps_reached,n),this.step=n}favourite_change(){this.changes=!0}submit_favourite(){this.G.L.entry("AssistPage.submit_favourite",this.favourite);for(const n of this.P.oidsorted)if(n==this.favourite)this.G.L.trace("AssistPage.submit_favourite favourite",n,100),this.set_rating(n,100);else{const e=Math.min(99,this.P.p.get_my_own_rating(n));this.G.L.trace("AssistPage.submit_favourite other",n,e),this.set_rating(n,e)}this.G.D.save_state(),this.acceptable[this.favourite]=!0,this.changes=!1,this.step=1.1}understood_favourite(){this.go_step(2)}acceptable_change(){this.changes=!0}submit_acceptable(){this.acceptable_oids=[];for(const n of this.P.oidsorted)if(this.acceptable[n]){if(this.acceptable_oids.push(n),n in this.estimates||(this.estimates[n]=0),n!=this.favourite){const e=Math.max(1,this.P.p.get_my_own_rating(n));this.G.L.trace("AssistPage.submit_acceptable other",n,e),this.set_rating(n,e)}}else this.G.L.trace("AssistPage.submit_acceptable other",n,0),this.set_rating(n,0);this.changes=!1,this.acceptable_oids.length>1?this.step=2.1:this.go_step(5)}understood_acceptable(){this.go_step(3)}estimate_change(){this.changes=!0}submit_estimates(){for(const n of this.acceptable_oids)n in this.thresholds||(this.thresholds[n]=100);this.changes=!1,this.step=3.1}understood_estimates(){this.go_step(4)}go_index(n){this.current_index=n}threshold_yes(){const n=this.thresholded_oids[this.current_index];1!=this.threshold_answer[n]&&(this.threshold_answer[n]=!0,this.thresholds[n]=Math.max(0,Math.min(100,this.thresholds[n],this.estimates[n])),this.changes=!0)}threshold_no(){const n=this.thresholded_oids[this.current_index];0!=this.threshold_answer[n]&&(this.threshold_answer[n]=!1,this.thresholds[n]=Math.min(100,Math.max(0,this.thresholds[n],this.estimates[n]+5)),this.changes=!0)}threshold_change(){this.changes=!0}submit_threshold(){if(this.current_index+1<this.thresholded_oids.length){const n=this.thresholded_oids[this.current_index];this.current_index++,this.threshold_answer[n]=null}else this.set_thresholded_ratings(),this.changes=!1,this.go_step(5)}set_thresholded_ratings(){for(const n of this.thresholded_oids){const e=Math.max(0,Math.min(100,105-this.thresholds[n]));this.G.L.trace("AssistPage.set_ratings",n,e),this.set_rating(n,e)}}understood_ratings(){this.close()}onScroll(){var n=this;return(0,h.Z)(function*(){const i=yield n.content.getScrollElement(),a=i.scrollHeight,r=i.offsetHeight;if(a>r){const A=i.scrollTop/(a-r);n.show_down=A<1,n.show_up=A>0}else n.show_down=n.show_up=!1})()}scroll_to_top(){var n=this;return(0,h.Z)(function*(){(yield n.content.getScrollElement()).scrollTo(0,0)})()}scroll_to_bottom(){var n=this;return(0,h.Z)(function*(){const e=yield n.content.getScrollElement();e.scrollTo(0,e.scrollHeight)})()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(p.sK),t.Y36(_.IN),t.Y36(b.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-assist"]],viewQuery:function(n,e){if(1&n&&t.Gf(_.W2,5),2&n){let i;t.iGM(i=t.CRH())&&(e.content=i.first)}},inputs:{P:"P"},decls:23,vars:17,consts:[[1,"ion-no-margin","ion-no-padding",2,"--inner-padding-end","0px!important"],[2,"padding-left","16px"],["slot","start","name","color-wand-outline"],[2,"font-weight","bold","font-size","larger",3,"innerHtml"],["slot","end"],["name","crescent","color","grey",4,"ngIf"],["fill","clear",3,"click"],["slot","icon-only","name","close-outline"],[1,"ion-no-margin","ion-padding-left","ion-text-center"],[4,"ngIf"],[3,"innerHtml"],[3,"scrollEvents","ionScroll",4,"ngIf"],["name","crescent","color","grey"],["slot","start","fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["slot","icon-only","name","arrow-back-outline"],["slot","end","fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["slot","icon-only","name","arrow-forward-outline"],[3,"scrollEvents","ionScroll"],["vertical","top","horizontal","end","slot","fixed","size","small","class","ion-no-margin ion-no-padding",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed","size","small","class","ion-no-margin ion-no-padding",4,"ngIf"],["color","warning",4,"ngIf"],["color","light"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["lines","none"],["size","normal","shape","round","slot","end",2,"padding-top","10px",3,"disabled","click"],["color","warning"],["slot","start",3,"value"],["color","success"],["size","normal","shape","round","slot","end",2,"padding-top","10px",3,"click"],["slot","start","checked","true","disabled","true",2,"margin-right","30px"],["color","black"],["color","grey"],["slot","start",3,"ngModel","ngModelChange"],["inputmode","numeric","maxlength","3","size","3","type","number","min","0","max","100","step","5","debounce","100",3,"ngModel","ngModelChange"],["color","secondary","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["color","primary"],["fill","solid",3,"innerHtml","color","click"],["color","secondary",2,"cursor","pointer",3,"click"],["inputmode","numeric","maxlength","3","size","3","type","number","max","100","step","5","debounce","100",3,"min","ngModel","ngModelChange"],["lines","none",2,"padding-bottom","10px!important"],["vertical","top","horizontal","end","slot","fixed","size","small",1,"ion-no-margin","ion-no-padding"],["size","small","color","light",3,"click"],["name","chevron-up-outline"],["vertical","bottom","horizontal","end","slot","fixed","size","small",1,"ion-no-margin","ion-no-padding"],["name","chevron-down-outline"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header")(1,"ion-item",0)(2,"ion-toolbar",1),t._UZ(3,"ion-icon",2),t._uU(4,"\xa0 "),t._UZ(5,"ion-text",3),t.ALo(6,"translate"),t.TgZ(7,"ion-buttons",4),t.YNc(8,P,1,0,"ion-spinner",5),t.TgZ(9,"ion-button",6),t.NdJ("click",function(){return e.close()}),t._UZ(10,"ion-icon",7),t.qZA()()()(),t.TgZ(11,"ion-item",8),t.YNc(12,T,4,0,"ng-container",9),t.TgZ(13,"ion-label")(14,"small")(15,"b"),t._UZ(16,"span",10),t.ALo(17,"translate"),t._uU(18,": "),t._UZ(19,"span",10),t.ALo(20,"translate"),t.qZA()()(),t.YNc(21,w,4,0,"ng-container",9),t.qZA()(),t.YNc(22,X,11,11,"ion-content",11)),2&n&&(t.xp6(5),t.Q6J("innerHtml",t.lcZ(6,7,"assist.-page-title"),t.oJD),t.xp6(3),t.Q6J("ngIf",!!e.P.p&&e.P.p.syncing&&e.window.navigator.onLine),t.xp6(4),t.Q6J("ngIf",e.step>1),t.xp6(4),t.Q6J("innerHtml",t.xi3(17,9,"step-i-of-n",t.WLB(14,$,e.Math.floor(e.step),e.n_steps)),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(20,12,"assist.-step-"+e.Math.floor(e.step)+"-title"),t.oJD),t.xp6(2),t.Q6J("ngIf",e.step<e.steps_reached&&!e.changes),t.xp6(1),t.Q6J("ngIf",e.P.ready))},dependencies:[d.sg,d.O5,g.JJ,g.nD,g.On,_.YG,_.Sm,_.nz,_.W2,_.IJ,_.W4,_.Gu,_.gu,_.pK,_.Ie,_.Q$,_.B7,_.se,_.PQ,_.yW,_.sr,_.w,_.as,_.U5,_.QI,p.X$],styles:['@charset "UTF-8";']}),o})();const tt=[{path:"",component:Z}];let nt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild(tt),x.Bz]}),o})(),et=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,g.u5,_.Pc,nt,p.aw.forChild()]}),o})()}}]);
//# sourceMappingURL=8581.9eb32db6de1162de.js.map