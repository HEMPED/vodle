"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2377],{2377:(u,d,i)=>{i.r(d),i.d(d,{InvitetoPageModule:()=>x});var h=i(4666),p=i(2508),l=i(8139),o=i(2004),r=i(6476),g=i(5099),m=i(8921),v=i(5568),f=i(2340),t=i(2135),_=i(2518);function y(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",16)(2,"ion-col",6),t._UZ(3,"p",2),t.ALo(4,"translate"),t.TgZ(5,"small"),t._UZ(6,"p",2),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"ion-item",7)(9,"ion-button",11),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.share_button_clicked())}),t._UZ(10,"span",2),t.ALo(11,"translate"),t._uU(12,"\xa0 "),t._UZ(13,"ion-icon",17),t.qZA()(),t.BQk()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,4,"inviteto.caution-with-share1"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(7,6,"inviteto.caution2"),t.oJD),t.xp6(3),t.Q6J("disabled",!1),t.xp6(1),t.Q6J("innerHtml",t.lcZ(11,8,"inviteto.share"),t.oJD))}function I(n,a){1&n&&(t.ynx(0),t.TgZ(1,"ion-item",16)(2,"ion-col",6),t._UZ(3,"p",2),t.ALo(4,"translate"),t.TgZ(5,"p"),t._UZ(6,"small",2),t.ALo(7,"translate"),t.qZA()()(),t.BQk()),2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,2,"inviteto.caution-without-share1"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(7,4,"inviteto.caution2"),t.oJD))}function Z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-list",4)(2,"ion-item",5)(3,"ion-col",6),t._UZ(4,"p",2),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,y,14,10,"ng-container",3),t.YNc(7,I,8,6,"ng-container",3),t.TgZ(8,"ion-item",7)(9,"ion-button",8)(10,"a",9),t._UZ(11,"span",2),t.ALo(12,"translate"),t._uU(13,"\xa0 "),t._UZ(14,"ion-icon",10),t.qZA()()(),t.TgZ(15,"ion-item",7)(16,"ion-button",11),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.copy_button_clicked())}),t._UZ(17,"span",2),t.ALo(18,"translate"),t._uU(19,"\xa0 "),t._UZ(20,"ion-icon",12),t.qZA()(),t.TgZ(21,"ion-item",13)(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.TgZ(24,"p"),t._uU(25,"\xa0"),t.qZA(),t.TgZ(26,"ion-button",14),t._UZ(27,"ion-icon",15),t._uU(28,"\xa0"),t._UZ(29,"span",2),t.ALo(30,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("innerHtml",t.lcZ(5,10,e.came_from_preview?"inviteto.first-intro":"inviteto.later-intro"),t.oJD),t.xp6(2),t.Q6J("ngIf",e.can_share),t.xp6(1),t.Q6J("ngIf",!e.can_share),t.xp6(2),t.Q6J("disabled",!1),t.xp6(1),t.Q6J("href",e.email_href,t.LSH),t.xp6(1),t.Q6J("innerHtml",t.lcZ(12,12,"inviteto.compose-email"),t.oJD),t.xp6(5),t.Q6J("disabled",!1),t.xp6(1),t.Q6J("innerHtml",t.lcZ(18,14,"inviteto.copy-link"),t.oJD),t.xp6(9),t.Q6J("routerLink","/poll/"+e.p.pid),t.xp6(3),t.Q6J("innerHtml",t.lcZ(30,16,"go-to-poll"),t.oJD)}}const P=[{path:"",component:(()=>{class n{constructor(e,s,c,L){this.router=e,this.route=s,this.translate=c,this.G=L,this.ready=!1,this.G.L.entry("InvitetoPage.constructor"),this.route.params.subscribe(G=>{this.pid=G.pid})}ngOnInit(){this.G.L.entry("InvitetoPage.ngOnInit")}ionViewWillEnter(){this.G.L.entry("InvitetoPage.ionViewWillEnter"),this.G.D.page=this,this.came_from_preview=!0,this.details_expanded=!1,this.can_use_web_share="function"==typeof navigator.share,this.can_share=g.dV.isNativePlatform()||this.can_use_web_share}ionViewDidEnter(){this.G.L.entry("InvitetoPage.ionViewDidEnter"),this.G.D.ready&&this.onDataReady(),this.G.L.debug("InvitetoPage.ready:",this.ready)}onDataReady(){this.G.L.entry("InvitetoPage.onDataReady"),this.pid in this.G.P.polls?(this.p=this.G.P.polls[this.pid],"draft"==this.p.state&&(this.G.L.warn("InvitetoPage called for draft poll, redirecting to mypolls page",this.pid),this.router.navigate(["/mypolls"]))):(this.G.L.warn("InvitetoPage unknown pid ignored, redirecting to mypolls page",this.pid,this.G.P.polls),this.router.navigate(["/mypolls"])),this.invite_link=f.N.magic_link_base_url+"joinpoll/"+encodeURIComponent(this.p.db_server_url)+"/"+encodeURIComponent(this.p.db_password)+"/"+this.pid+"/"+this.p.password,this.G.L.info("InvitetoPage invite link:",this.invite_link),this.message_title=this.translate.instant("invite-email.subject",{due:this.G.D.format_date(this.p.due)}),this.message_body=this.translate.instant("invite-email.body-greeting")+"\n\n"+this.translate.instant("invite-email.body-before-title")+"\n\n"+String.fromCharCode(160).repeat(4)+this.p.title+".\n\n"+this.translate.instant("invite-email.body-closes",{due:this.G.D.format_date(this.p.due)})+"\n\n"+this.translate.instant("invite-email.body-before-link")+"\n\n"+String.fromCharCode(160).repeat(4)+this.invite_link+"\n\n"+this.translate.instant("invite-email.body-dont-share")+"\n\n"+this.translate.instant("invite-email.body-regards"),this.email_href="mailto:?subject="+encodeURIComponent(this.message_title)+"&body="+encodeURIComponent(this.message_body),this.ready=!0}ionViewDidLeave(){this.G.L.entry("InvitetoPage.ionViewDidLeave"),this.G.D.save_state(),this.G.L.exit("InvitetoPage.ionViewDidLeave")}share_button_clicked(){this.G.L.entry("InvitetoPage.share_button_clicked"),m.m.share({title:this.message_title,text:this.message_body,dialogTitle:"Share vodle invite link"}).then(e=>{this.G.L.info("InvitetoPage.share_button_clicked succeeded",e)}).catch(e=>{this.G.L.error("InvitetoPage.share_button_clicked failed",e)})}copy_button_clicked(){this.G.L.entry("InvitetoPage.copy_button_clicked"),window.navigator.clipboard.writeText(this.invite_link),v.s.schedule({notifications:[{title:this.translate.instant("inviteto.notification-copied-link-title"),body:this.translate.instant("inviteto.notification-copied-link-body"),id:null}]}).then(e=>{this.G.L.trace("InvitetoPage.copy_button_clicked localNotifications.schedule succeeded:",e)}).catch(e=>{this.G.L.warn("InvitetoPage.copy_button_clicked localNotifications.schedule failed:",e)}),this.G.L.exit("InvitetoPage.copy_button_clicked")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.F0),t.Y36(r.gz),t.Y36(l.sK),t.Y36(_.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inviteto"]],decls:7,vars:4,consts:[[2,"padding-right","11px"],["slot","start"],[3,"innerHtml"],[4,"ngIf"],["lines","full"],["color","warning"],[1,"ion-no-padding","ion-no-margin"],["lines","none","text-wrap","",1,"ion-text-end"],["size","large","color","primary","slot","end","shape","round",3,"disabled"],["target","_top",2,"color","inherit","text-decoration","inherit",3,"href"],["name","mail-open-outline"],["size","large","color","primary","slot","end","shape","round",3,"disabled","click"],["name","copy-outline"],["lines","none",1,"ion-text-center"],["fill","clear","size","small",1,"ion-no-margin","ion-no-padding",3,"routerLink"],["name","arrow-forward-outline","size","small"],["lines","none"],["name","share-social-outline"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t._UZ(4,"ion-title",2),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,Z,31,18,"ion-content",3)),2&e&&(t.xp6(4),t.Q6J("innerHtml",t.lcZ(5,2,"inviteto.-page-title"),t.oJD),t.xp6(2),t.Q6J("ngIf",s.ready&&null!=s.p))},dependencies:[h.O5,o.YG,o.Sm,o.wI,o.W2,o.Gu,o.gu,o.Ie,o.q_,o.fG,o.wd,o.sr,o.YI,r.rH,l.X$],styles:['@charset "UTF-8";']}),n})()}];let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.Bz.forChild(P),r.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.ez,p.u5,o.Pc,b,l.aw.forChild()]}),n})()},8921:(u,d,i)=>{i.d(d,{m:()=>p});const p=(0,i(5099).fo)("Share",{web:()=>i.e(3656).then(i.bind(i,3656)).then(l=>new l.ShareWeb)})}}]);
//# sourceMappingURL=2377.5cbced9e7791d2df.js.map